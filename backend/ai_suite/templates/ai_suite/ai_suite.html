{% extends 'display/base.html' %}
{% block title %}AI Suite Dashboard{% endblock %}

{% block content %}
<div class="container mt-5">
  <div class="card shadow-lg border-0 rounded-4">
    <div class="card-body">
      <h2 class="card-title mb-4 text-primary fw-bold">
        🤖 AI Crew Dashboard
      </h2>

      <div class="alert alert-info d-flex align-items-center gap-2" role="alert">
        <i class="bi bi-graph-up-arrow"></i>
        This AI-generated insight includes health analysis, developer load, and actionable recommendations.
      </div>

      <form method="get" class="mb-3">
        <label for="status">Filter by Project Status:</label>
        <select name="status" id="status" class="form-select w-auto d-inline mx-2">
          <option value="In Progress" {% if selected_status == "In Progress" %}selected{% endif %}>In Progress</option>
          <option value="Delayed" {% if selected_status == "Delayed" %}selected{% endif %}>Delayed</option>
          <option value="On Hold" {% if selected_status == "On Hold" %}selected{% endif %}>On Hold</option>
          <option value="Completed" {% if selected_status == "Completed" %}selected{% endif %}>Completed</option>
        </select>
        <button type="submit" class="btn btn-primary">Apply</button>
      </form>
      <div class="accordion" id="aiAccordion">
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingAI">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseAI" aria-expanded="true" aria-controls="collapseAI">
              📋 Project Health & Recommendations
            </button>
          </h2>
          <div id="collapseAI" class="accordion-collapse collapse show" aria-labelledby="headingAI" data-bs-parent="#aiAccordion">
            <div class="accordion-body">
                <pre class="bg-light p-3 rounded" style="white-space: pre-wrap;">
                    {{ ai_output|default:"Please select a project status to get insights." }}
                </pre>
            </div>
          </div>
        </div>
      </div>

      <div class="d-flex justify-content-end mt-4">
        <a href="{% url 'display:project_list' %}" class="btn btn-outline-primary">⬅️ Back to Dashboard</a>
      </div>
    </div>
  </div>
</div>
{% endblock %}
